<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Pkg Diff</title>
		<style>
			/*
				Josh's Custom CSS Reset
				https://www.joshwcomeau.com/css/custom-css-reset/
			*/
			*,
			*::before,
			*::after {
				box-sizing: border-box;
			}
			* {
				margin: 0;
			}
			html,
			body {
				height: 100%;
			}
			body {
				line-height: 1.5;
				-webkit-font-smoothing: antialiased;
			}
			img,
			picture,
			video,
			canvas {
				display: block;
				max-width: 100%;
			}
			input,
			button,
			textarea,
			select {
				font: inherit;
			}
			p,
			h1,
			h2,
			h3 {
				overflow-wrap: break-word;
			}
			/* Custom styles */
			body {
				display: flex;
				flex-direction: column;
				background-color: #3e424d;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans",
					"Helvetica Neue", sans-serif;
			}
			header {
				height: 48px;
				display: flex;
				align-items: center;
				padding-left: 1.5rem;
				color: #fff;
				font-size: 24px;
				font-weight: 600;
			}
			footer {
				color: #fff;
				margin-top: auto;
			}
			table {
				width: 100%;
				border-spacing: 0;
			}
			td {
				border: 0;
				padding: 0;
			}
			.container {
				margin: 0 auto;
				width: 1280px;
				max-width: 1280px;
			}
			.file {
				border: 1px solid transparent;
				border-radius: 3px;
				margin-bottom: 1rem;
				background-color: #fff;
				font-family: ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace;
			}
			.file-header {
				display: flex;
				align-items: center;
				padding: 10px 10px 10px 6px;
				font-size: 13px;
				background-color: #fff;
				border-bottom: 1px solid #d0d7de;
			}
			.collapsed .file-header {
				border: 0;
			}
			.file-status {
				color: #999;
				border: 1px solid #999;
				border-radius: 3px;
				padding: 0 0.25rem;
				display: inline-block;
				text-transform: uppercase;
				margin-right: 1rem;
				user-select: none;
			}
			.file-status-removed {
				color: #cf222e;
				border-color: #cf222e;
			}
			.file-status-added {
				color: #2da44e;
				border-color: #2da44e;
			}
			.collapsed .file-diff {
				display: none;
			}
			.collapse-diff {
				width: 24px;
				height: 20px;
				margin-right: 0.5rem;
				display: inline-block;
				color: #57606a;
				background: transparent;
				border: 0;
				box-shadow: none;
				cursor: pointer;
			}
			.collapse-diff:hover {
				color: #0969da;
			}
			.chevron {
				fill: currentColor;
			}
			.collapsed .chevron {
				transform: rotate(90deg);
			}
			.diff-line {
				font-size: 12px;
				line-height: 20px;
			}
			.diff-line.selected .line-number,
			.diff-line.selected .line-text {
				background-color: #fff8c5 !important;
			}
			.line-type-chunk-header {
				background-color: #ddf4ff;
				color: #57606a;
			}
			.line-type-context {
				background-color: #fff;
			}
			.line-number {
				width: 1%;
				min-width: 35px;
				padding-left: 0.5rem;
				padding-right: 0.5rem;
				color: #6e7781;
				text-align: right;
				white-space: nowrap;
				user-select: none;
				cursor: pointer;
			}
			.line-type-add .line-number {
				background-color: #ccffd8;
				color: #24292f;
			}
			.line-type-remove .line-number {
				background-color: #ffd7d5;
				color: #24292f;
			}
			.line-text {
				white-space: pre;
			}
			.line-type-add .line-text {
				background-color: #e6ffec;
			}
			.line-type-remove .line-text {
				background-color: #ffebe9;
			}
			.line-type-chunk-header .line-text::before,
			.line-type-context .line-text::before {
				content: "   ";
			}
			.line-type-add .line-text::before {
				content: " + ";
			}
			.line-type-remove .line-text::before {
				content: " - ";
			}
			.line-text::selection {
				background: rgba(84, 174, 255, 0.4);
			}
		</style>
	</head>
	<body>
		<header>
			<div class="container">Pkg Diff</div>
		</header>
		<main>{% block body %}{% endblock %}</main>
		<footer>
			<div class="container">footer</div>
		</footer>
		<script>
			/*
				Make it possible to click line numbers to update the address bar to a
				link directly to that line.
			*/
			if (location.hash) {
				document.getElementById(location.hash.replace("#", "")).classList.add("selected");
			}

			const lines = document.querySelectorAll(".line-number");
			lines.forEach((line) => {
				line.addEventListener("click", (e) => {
					const parent = line.parentNode;

					if (parent && parent.id) {
						document.querySelectorAll(".diff-line.selected").forEach((selectedLine) => {
							selectedLine.classList.remove("selected");
						});

						parent.classList.add("selected");

						history.replaceState(null, null, "#" + parent.id);
					}
				});
			});

			const fileToggles = document.querySelectorAll(".collapse-diff");
			fileToggles.forEach((toggle) => {
				toggle.addEventListener("click", (e) => {
					const header = toggle.parentNode;
					const file = header.parentNode;
					file.classList.toggle("collapsed") && scrollIfNeeded(header);
				});
			});

			const scrollIfNeeded = (elem) => {
				elem.getBoundingClientRect().top < 0 && elem.scrollIntoView(true);
			};
		</script>
	</body>
</html>
